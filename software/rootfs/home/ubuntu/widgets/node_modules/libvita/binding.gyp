{
    "targets": [
        {
            "target_name": "vita",
            "sources": [
                "vitabridge.cc",
                "../lib/libvita/src/vita.c",
                "../lib/libvita/src/vterror.c",
                "../lib/libvita/src/usblib1.c",
                "../lib/libvita/src/os.c",
                "../lib/libvita/src/an2006.c",
                "../lib/libvita/src/an2003.c",
                "../lib/libvita/src/pca9555.c",
                "../lib/libvita/src/an2012.c",
		"../lib/libvita/src/an2013.c",
                "../lib/libvita/src/ad5301_8.c",
                "../lib/libvita/src/an2015.c",
                "../lib/libvita/src/an2016.c",
                "../lib/libvita/src/an2053.c",
                "../lib/libvita/src/an9555.c",
                "../lib/libvita/src/dummy.c",
                "../lib/libvita/src/an2024.c",
                "../lib/libvita/src/anfpgapwm.c"
            ],
            "conditions": [
                ["OS=='win'", {
                    "defines": [
                        "TRACEON",
                        "VITA_WIN32",
                        "WIN32",
                        "_WINDOWS",
                        "_CRT_SECURE_NO_WARNINGS"
                    ],
                    "include_dirs": [
                        "../lib/libvita/src",
                        "../lib/libvita/windows/include"
                    ],
                    "cflags": [
                        "/Zi",
                        "/nologo",
                        "/W3",
                        "/WX-",
                        "/Od",
                        "/Ob0",
                        "/Oy-"
                        "/Gm-",
                        "/RTC1",
                        "/MTd",
                        "/GS",
                        "/Gd",
                        "/TC"
                    ],
                    "link_settings": {
                        "flags": [
                            "/DEBUG",
                            "/SUBSYSTEM:CONSOLE",
                            "/INCREMENTAL",
                            "/VERBOSE:LIB",
                            "libusb-1.0.lib"
                        ],
                        "libraries": [
                            "../../lib/libvita/windows/lib/x64/Debug/libusb-1.0.lib"
                        ]
                    },
                },
                { # OS != 'win'
                    "defines": [
                        "TRACEON"#, "USB_DEBUG"
                    ],
                    "include_dirs": [
                        "/usr/include/libusb-1.0",
                        "../lib/libvita/src"
                    ],
                    "cflags": [
                        '-O0',
                        '-g'
                    ],
                    "link_settings": {
                        "libraries": [
                            "-lusb-1.0"
                        ],
                    },
                }]
            ]
        }
    ]
}
