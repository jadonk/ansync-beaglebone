var assert = require('assert');
var common = require('./common');

var addon = require('../index.js');

describe('AN2012', function() {
	before(function() {
		this.dev = addon.open('usb:CLASS_AN2012'); 
	});
	after(function() {
		this.dev.close();
	});

	describe('#getInputs()', function() {
		it('should get the voltage on channel 1', function(done) {
			this.dev.getInputs(1, 1, done);
		});

		it('should get the voltage on channel 2', function(done) {
			this.dev.getInputs(1, 2, done);
		});

		it('should generate an error', function(done) {
			this.dev.getInputs(1, 3, common.invert(done));
		});

		it('should get the fet value', function(done) {
			this.dev.getInputs(2, 1, done);
		});
	});
	
	describe('#setOutputs()', function() {
		it('should set voltage on channel 1', function(done) {
			this.dev.setOutputs(1, 1, 12, done);
		});

		it('should set voltage on channel 2', function(done) {
			this.dev.setOutputs(1, 2, 12, done);
		});

		it('should generate an error', function(done) {
			this.dev.setOutputs(1, 3, 12, common.invert(done));
		});

		it('should set the fet', function(done) {
			this.dev.setOutputs(2, 1, 12, done);
		});
	});
});