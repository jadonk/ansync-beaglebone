var Vita = require('./index');

var test = Vita.open("usb:CLASS_AN2024");

test.setOutputs(1, 1, 0xDEAD, function(err) {
	if (err) console.log(err);
});

test.on('error', function(data) {
    console.log('JS: agent error.', data);
});

test.on('data', function(data) {
		process.stdout.write(require('util').format('\033[3K\033[0G Agent value: %s', data));
});

test.startAgent(1, 4, 100);

setInterval(function() {
	var input = Math.floor(Math.random() * 0xFFFF) + 1;
  test.setOutputs(1, 1, input, function(err, data) {
  	if(err) console.log(err);
    });
}, 1000);
